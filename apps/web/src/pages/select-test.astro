---
import BlockExampleLayout from "@/components/BlockExampleLayout.astro";
import { Label } from "@bejamas/ui/components/label";
import { Button } from "@bejamas/ui/components/button";
import {
  Select,
  SelectTrigger,
  SelectValue,
  SelectContent,
  SelectItem,
  SelectGroup,
  SelectLabel,
  SelectSeparator,
} from "@bejamas/ui/components/select";
---

<BlockExampleLayout>
  <section class="max-w-4xl mx-auto py-20 px-5 space-y-12">
    <h1 class="text-3xl font-bold mb-10">Select Component Test</h1>

    <!-- 1. Default -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">1. Default</h2>
      <p class="text-sm text-muted-foreground">Basic select with fruits</p>
      <Select class="w-[200px]">
        <SelectTrigger>
          <SelectValue placeholder="Select a fruit" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="apple">Apple</SelectItem>
          <SelectItem value="banana">Banana</SelectItem>
          <SelectItem value="cherry">Cherry</SelectItem>
          <SelectItem value="grape">Grape</SelectItem>
          <SelectItem value="orange">Orange</SelectItem>
        </SelectContent>
      </Select>
    </div>

    <!-- 2. Position Modes -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">2. Position Modes</h2>
      <p class="text-sm text-muted-foreground">Side-by-side: item-aligned vs popper</p>
      <div class="flex gap-8">
        <div class="space-y-2">
          <Label>Item-aligned (default)</Label>
          <Select class="w-[180px]">
            <SelectTrigger>
              <SelectValue placeholder="Select..." />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="option1">Option 1</SelectItem>
              <SelectItem value="option2">Option 2</SelectItem>
              <SelectItem value="option3">Option 3</SelectItem>
            </SelectContent>
          </Select>
        </div>
        <div class="space-y-2">
          <Label>Popper mode</Label>
          <Select position="popper" class="w-[180px]">
            <SelectTrigger>
              <SelectValue placeholder="Select..." />
            </SelectTrigger>
            <SelectContent position="popper">
              <SelectItem value="option1">Option 1</SelectItem>
              <SelectItem value="option2">Option 2</SelectItem>
              <SelectItem value="option3">Option 3</SelectItem>
            </SelectContent>
          </Select>
        </div>
      </div>
    </div>

    <!-- 2b. Popper Mode Options -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">2b. Popper Mode Options</h2>
      <p class="text-sm text-muted-foreground">Different side, align, and offset configurations</p>
      <div class="flex flex-wrap gap-8">
        <div class="space-y-2">
          <Label>Side: top</Label>
          <Select position="popper" side="top" class="w-[180px]">
            <SelectTrigger>
              <SelectValue placeholder="Opens above" />
            </SelectTrigger>
            <SelectContent position="popper">
              <SelectItem value="option1">Option 1</SelectItem>
              <SelectItem value="option2">Option 2</SelectItem>
              <SelectItem value="option3">Option 3</SelectItem>
            </SelectContent>
          </Select>
        </div>
        <div class="space-y-2">
          <Label>Align: center</Label>
          <Select position="popper" align="center" class="w-[180px]">
            <SelectTrigger>
              <SelectValue placeholder="Centered" />
            </SelectTrigger>
            <SelectContent position="popper">
              <SelectItem value="option1">Option 1</SelectItem>
              <SelectItem value="option2">Option 2</SelectItem>
              <SelectItem value="option3">Option 3</SelectItem>
            </SelectContent>
          </Select>
        </div>
        <div class="space-y-2">
          <Label>Align: end</Label>
          <Select position="popper" align="end" class="w-[180px]">
            <SelectTrigger>
              <SelectValue placeholder="End aligned" />
            </SelectTrigger>
            <SelectContent position="popper">
              <SelectItem value="option1">Option 1</SelectItem>
              <SelectItem value="option2">Option 2</SelectItem>
              <SelectItem value="option3">Option 3</SelectItem>
            </SelectContent>
          </Select>
        </div>
        <div class="space-y-2">
          <Label>With sideOffset: 12</Label>
          <Select position="popper" sideOffset={12} class="w-[180px]">
            <SelectTrigger>
              <SelectValue placeholder="Extra gap" />
            </SelectTrigger>
            <SelectContent position="popper">
              <SelectItem value="option1">Option 1</SelectItem>
              <SelectItem value="option2">Option 2</SelectItem>
              <SelectItem value="option3">Option 3</SelectItem>
            </SelectContent>
          </Select>
        </div>
      </div>
    </div>

    <!-- 3. Groups with Labels and Separators -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">3. Groups with Labels and Separators</h2>
      <p class="text-sm text-muted-foreground">Organized with Fruits/Vegetables/Proteins</p>
      <Select class="w-[220px]">
        <SelectTrigger>
          <SelectValue placeholder="Select food" />
        </SelectTrigger>
        <SelectContent>
          <SelectGroup>
            <SelectLabel>Fruits</SelectLabel>
            <SelectItem value="apple">Apple</SelectItem>
            <SelectItem value="banana">Banana</SelectItem>
            <SelectItem value="cherry">Cherry</SelectItem>
          </SelectGroup>
          <SelectSeparator />
          <SelectGroup>
            <SelectLabel>Vegetables</SelectLabel>
            <SelectItem value="carrot">Carrot</SelectItem>
            <SelectItem value="broccoli">Broccoli</SelectItem>
            <SelectItem value="spinach">Spinach</SelectItem>
          </SelectGroup>
          <SelectSeparator />
          <SelectGroup>
            <SelectLabel>Proteins</SelectLabel>
            <SelectItem value="chicken">Chicken</SelectItem>
            <SelectItem value="beef">Beef</SelectItem>
            <SelectItem value="tofu">Tofu</SelectItem>
          </SelectGroup>
        </SelectContent>
      </Select>
    </div>

    <!-- 4. Scrollable (Timezones) -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">4. Scrollable</h2>
      <p class="text-sm text-muted-foreground">Timezone selector with many items</p>
      <Select class="w-[280px]">
        <SelectTrigger>
          <SelectValue placeholder="Select timezone" />
        </SelectTrigger>
        <SelectContent>
          <SelectGroup>
            <SelectLabel>North America</SelectLabel>
            <SelectItem value="est">Eastern Standard Time (EST)</SelectItem>
            <SelectItem value="cst">Central Standard Time (CST)</SelectItem>
            <SelectItem value="mst">Mountain Standard Time (MST)</SelectItem>
            <SelectItem value="pst">Pacific Standard Time (PST)</SelectItem>
            <SelectItem value="akst">Alaska Standard Time (AKST)</SelectItem>
            <SelectItem value="hst">Hawaii Standard Time (HST)</SelectItem>
          </SelectGroup>
          <SelectSeparator />
          <SelectGroup>
            <SelectLabel>Europe</SelectLabel>
            <SelectItem value="gmt">Greenwich Mean Time (GMT)</SelectItem>
            <SelectItem value="cet">Central European Time (CET)</SelectItem>
            <SelectItem value="eet">Eastern European Time (EET)</SelectItem>
            <SelectItem value="wet">Western European Time (WET)</SelectItem>
          </SelectGroup>
          <SelectSeparator />
          <SelectGroup>
            <SelectLabel>Asia</SelectLabel>
            <SelectItem value="msk">Moscow Time (MSK)</SelectItem>
            <SelectItem value="ist">India Standard Time (IST)</SelectItem>
            <SelectItem value="cst-asia">China Standard Time (CST)</SelectItem>
            <SelectItem value="jst">Japan Standard Time (JST)</SelectItem>
            <SelectItem value="kst">Korea Standard Time (KST)</SelectItem>
            <SelectItem value="sgt">Singapore Time (SGT)</SelectItem>
          </SelectGroup>
          <SelectSeparator />
          <SelectGroup>
            <SelectLabel>Australia & Pacific</SelectLabel>
            <SelectItem value="awst">Australian Western Time (AWST)</SelectItem>
            <SelectItem value="acst">Australian Central Time (ACST)</SelectItem>
            <SelectItem value="aest">Australian Eastern Time (AEST)</SelectItem>
            <SelectItem value="nzst">New Zealand Standard Time (NZST)</SelectItem>
          </SelectGroup>
        </SelectContent>
      </Select>
    </div>

    <!-- 5. Sizes -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">5. Sizes</h2>
      <p class="text-sm text-muted-foreground">sm (h-8), default (h-9), lg (h-10) - matching Button and Input sizes</p>
      <div class="flex items-end gap-4">
        <div class="space-y-2">
          <Label>Small</Label>
          <Select class="w-[180px]">
            <SelectTrigger size="sm">
              <SelectValue placeholder="Small size" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="apple">Apple</SelectItem>
              <SelectItem value="banana">Banana</SelectItem>
              <SelectItem value="cherry">Cherry</SelectItem>
            </SelectContent>
          </Select>
        </div>
        <div class="space-y-2">
          <Label>Default</Label>
          <Select class="w-[180px]">
            <SelectTrigger>
              <SelectValue placeholder="Default size" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="apple">Apple</SelectItem>
              <SelectItem value="banana">Banana</SelectItem>
              <SelectItem value="cherry">Cherry</SelectItem>
            </SelectContent>
          </Select>
        </div>
        <div class="space-y-2">
          <Label>Large</Label>
          <Select class="w-[180px]">
            <SelectTrigger size="lg">
              <SelectValue placeholder="Large size" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="apple">Apple</SelectItem>
              <SelectItem value="banana">Banana</SelectItem>
              <SelectItem value="cherry">Cherry</SelectItem>
            </SelectContent>
          </Select>
        </div>
      </div>
    </div>

    <!-- 6. Disabled Select -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">6. Disabled Select</h2>
      <p class="text-sm text-muted-foreground">Entire select is disabled</p>
      <Select disabled class="w-[200px]">
        <SelectTrigger disabled>
          <SelectValue placeholder="Disabled" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="apple">Apple</SelectItem>
          <SelectItem value="banana">Banana</SelectItem>
        </SelectContent>
      </Select>
    </div>

    <!-- 7. Disabled Items -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">7. Disabled Items</h2>
      <p class="text-sm text-muted-foreground">Mix of enabled/disabled items</p>
      <Select class="w-[200px]">
        <SelectTrigger>
          <SelectValue placeholder="Select option" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="available1">Available Option 1</SelectItem>
          <SelectItem value="unavailable1" disabled>Unavailable Option</SelectItem>
          <SelectItem value="available2">Available Option 2</SelectItem>
          <SelectItem value="unavailable2" disabled>Also Unavailable</SelectItem>
          <SelectItem value="available3">Available Option 3</SelectItem>
        </SelectContent>
      </Select>
    </div>

    <!-- 8. Invalid/Error State -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">8. Invalid/Error State</h2>
      <p class="text-sm text-muted-foreground">With aria-invalid="true"</p>
      <Select class="w-[200px]">
        <SelectTrigger aria-invalid="true">
          <SelectValue placeholder="Required field" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="apple">Apple</SelectItem>
          <SelectItem value="banana">Banana</SelectItem>
          <SelectItem value="cherry">Cherry</SelectItem>
        </SelectContent>
      </Select>
    </div>

    <!-- 9. With Default Value -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">9. With Default Value</h2>
      <p class="text-sm text-muted-foreground">Pre-selected value: "banana"</p>
      <Select defaultValue="banana" class="w-[200px]">
        <SelectTrigger>
          <SelectValue placeholder="Select a fruit" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="apple">Apple</SelectItem>
          <SelectItem value="banana">Banana</SelectItem>
          <SelectItem value="cherry">Cherry</SelectItem>
          <SelectItem value="grape">Grape</SelectItem>
        </SelectContent>
      </Select>
    </div>

    <!-- 10. Event Testing -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">10. Event Testing</h2>
      <p class="text-sm text-muted-foreground">Console logging select:change and select:open-change</p>
      <Select id="event-select" class="w-[200px]">
        <SelectTrigger>
          <SelectValue placeholder="Check console" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="option1">Option 1</SelectItem>
          <SelectItem value="option2">Option 2</SelectItem>
          <SelectItem value="option3">Option 3</SelectItem>
        </SelectContent>
      </Select>
      <script>
        const eventSelect = document.getElementById("event-select");

        eventSelect?.addEventListener("select:change", (e: Event) => {
          const detail = (e as CustomEvent).detail;
          console.log("select:change event:", detail);
        });

        eventSelect?.addEventListener("select:open-change", (e: Event) => {
          const detail = (e as CustomEvent).detail;
          console.log("select:open-change event:", detail);
        });
      </script>
    </div>

    <!-- 11. Programmatic Control -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">11. Programmatic Control</h2>
      <p class="text-sm text-muted-foreground">Buttons to set value, open, close</p>
      <div class="flex flex-col gap-4">
        <Select id="programmatic-select" class="w-[200px]">
          <SelectTrigger>
            <SelectValue placeholder="Control me" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="apple">Apple</SelectItem>
            <SelectItem value="banana">Banana</SelectItem>
            <SelectItem value="cherry">Cherry</SelectItem>
          </SelectContent>
        </Select>
        <div class="flex flex-wrap gap-2">
          <button
            id="set-apple-btn"
            class="px-3 py-1.5 text-sm border rounded-lg hover:bg-muted"
          >
            Set "Apple"
          </button>
          <button
            id="set-banana-btn"
            class="px-3 py-1.5 text-sm border rounded-lg hover:bg-muted"
          >
            Set "Banana"
          </button>
          <button
            id="set-cherry-btn"
            class="px-3 py-1.5 text-sm border rounded-lg hover:bg-muted"
          >
            Set "Cherry"
          </button>
          <button
            id="open-btn"
            class="px-3 py-1.5 text-sm border rounded-lg hover:bg-muted"
          >
            Open
          </button>
          <button
            id="close-btn"
            class="px-3 py-1.5 text-sm border rounded-lg hover:bg-muted"
          >
            Close
          </button>
        </div>
      </div>
      <script>
        const programmaticSelect = document.getElementById("programmatic-select");

        document.getElementById("set-apple-btn")?.addEventListener("click", () => {
          programmaticSelect?.dispatchEvent(
            new CustomEvent("select:set", { detail: { value: "apple" } })
          );
        });

        document.getElementById("set-banana-btn")?.addEventListener("click", () => {
          programmaticSelect?.dispatchEvent(
            new CustomEvent("select:set", { detail: { value: "banana" } })
          );
        });

        document.getElementById("set-cherry-btn")?.addEventListener("click", () => {
          programmaticSelect?.dispatchEvent(
            new CustomEvent("select:set", { detail: { value: "cherry" } })
          );
        });

        document.getElementById("open-btn")?.addEventListener("click", () => {
          programmaticSelect?.dispatchEvent(
            new CustomEvent("select:set", { detail: { open: true } })
          );
        });

        document.getElementById("close-btn")?.addEventListener("click", () => {
          programmaticSelect?.dispatchEvent(
            new CustomEvent("select:set", { detail: { open: false } })
          );
        });
      </script>
    </div>

    <!-- 12. Form Integration -->
    <div class="space-y-4">
      <h2 class="text-lg font-semibold">12. Form Integration</h2>
      <p class="text-sm text-muted-foreground">Within a form with submit</p>
      <form
        id="test-form"
        class="flex flex-col gap-4 p-4 border rounded-lg max-w-sm"
      >
        <div class="space-y-2">
          <Label for="name">Name</Label>
          <input
            id="name"
            name="name"
            type="text"
            placeholder="Enter your name"
            class="flex h-9 w-full rounded-lg border border-input bg-background px-3 py-1 text-sm shadow-xs outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]"
          />
        </div>
        <div class="space-y-2">
          <Label>Favorite Fruit</Label>
          <Select name="fruit" class="w-full">
            <SelectTrigger>
              <SelectValue placeholder="Select a fruit" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="apple">Apple</SelectItem>
              <SelectItem value="banana">Banana</SelectItem>
              <SelectItem value="cherry">Cherry</SelectItem>
              <SelectItem value="grape">Grape</SelectItem>
            </SelectContent>
          </Select>
        </div>
        <div class="space-y-2">
          <Label>Priority</Label>
          <Select name="priority" required class="w-full">
            <SelectTrigger>
              <SelectValue placeholder="Select priority" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="low">Low</SelectItem>
              <SelectItem value="medium">Medium</SelectItem>
              <SelectItem value="high">High</SelectItem>
            </SelectContent>
          </Select>
        </div>
        <Button type="submit">Submit</Button>
      </form>
      <div id="form-output" class="text-sm text-muted-foreground"></div>
      <script>
        document.getElementById("test-form")?.addEventListener("submit", (e) => {
          e.preventDefault();
          const formData = new FormData(e.target as HTMLFormElement);
          const data = Object.fromEntries(formData.entries());
          const output = document.getElementById("form-output");
          if (output) {
            output.textContent = `Form data: ${JSON.stringify(data, null, 2)}`;
          }
          console.log("Form submitted:", data);
        });
      </script>
    </div>
  </section>
</BlockExampleLayout>
