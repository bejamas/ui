{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "sticky-surface",
  "dependencies": [],
  "files": [
    {
      "path": "ui/StickySurface.astro",
      "content": "---\r\n/**\r\n * @component StickySurface\r\n * @title Sticky Surface\r\n * @description A sticky surface component with scroll-based effects (border, shadow, surface swap, shrink, glass).\r\n * @figmaUrl \r\n * \r\n * @preview\r\n * \r\n * <div class=\"overflow-y-auto max-h-[320px] w-full bg-border px-8 border-border\">\r\n *   <div class=\"h-[1000px] bg-muted\">\r\n *     <StickySurface effects={[\"line\", \"elevate\"]} threshold=\"1rem\" observeStuck class=\"bg-background p-4 flex justify-between items-center\">\r\n *       <p>Scroll inside!</p>\r\n *       <div class=\"flex items-center gap-2\">\r\n *         <Button size=\"sm\" variant=\"outline\" class=\"group-[.is-stuck]/surface:opacity-0 will-change-transform group-[.is-stuck]/surface:blur-sm transition-all duration-300 ease-out\">Log in</Button>\r\n *         <Button size=\"sm\" class=\"w-24 group-[.is-stuck]/surface:w-28 duration-500 ease-out\">\r\n *           <span class=\"group-[.is-stuck]/surface:blur-sm group-[.is-stuck]/surface:opacity-0 absolute group-[.is-stuck]/surface:hidden transition-discrete duration-500 ease-out\">Contact</span>\r\n *           <span class=\"group-[.is-stuck]/surface:blur-none group-[.is-stuck]/surface:opacity-100 group-[.is-stuck]/surface:delay-150 opacity-0 transition-all blur-sm duration-500 ease-out\">Get a demo</span>\r\n *         </Button>\r\n *       </div>\r\n *     </StickySurface>\r\n *   </div>\r\n * </div>\r\n */\r\n\r\nimport type { HTMLTag, Polymorphic } from \"astro/types\";\r\nimport { cva } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ntype Props = { \r\n  as: HTMLTag;\r\n  threshold?: string | number;\r\n  effects?: Array<\"line\" | \"elevate\" | \"backdrop\">;\r\n  class?: string;\r\n  observeStuck?: boolean;\r\n };\r\n\r\nconst {\r\n  as = \"div\",\r\n  threshold = \"16px\",\r\n  effects = [],\r\n  class: className = \"\",\r\n  style = \"\",\r\n  ...props\r\n} = Astro.props;\r\n\r\n// Compose effect booleans for easier use\r\nconst hasLine = effects.includes(\"line\");\r\nconst hasElevate = effects.includes(\"elevate\");\r\nconst hasBackdrop = effects.includes(\"backdrop\");\r\n\r\n// CSS variable tokens (can be overridden via Tailwind arbitrary props)\r\nconst defaultVars = {\r\n  '--stuck-shadow': '0 2px 8px 0 rgb(0 0 0 / 0.06)',\r\n  '--stuck-threshold': typeof threshold === \"number\" ? `${threshold}px` : threshold,\r\n};\r\n\r\n\r\nconst Tag = as;\r\n\r\n// cva for sticky surface effects\r\nconst stickySurfaceVariants = cva(\r\n  [\r\n    \"group/surface\", \"sticky\", \"top-0\", \"z-50\", \"w-full\", \"transition-all\", \"duration-300\", \"will-change-transform\"\r\n  ],\r\n  {\r\n    variants: {\r\n      line: {\r\n        true: \"after:content-[''] after:pointer-events-none after:absolute after:inset-x-0 after:bottom-0 after:h-px after:bg-black/15 after:opacity-0 supports-[animation-timeline:scroll()]:after:[animation:show-line_linear_both] supports-[animation-timeline:scroll()]:after:[animation-timeline:scroll(nearest_block)] supports-[animation-timeline:scroll()]:after:[animation-range:0_var(--stuck-threshold)]\"\r\n      },\r\n      elevate: {\r\n        true: \"shadow-none supports-[animation-timeline:scroll()]:[animation:stuck-shadow_linear_both] supports-[animation-timeline:scroll()]:[animation-timeline:scroll(nearest_block)] supports-[animation-timeline:scroll()]:[animation-range:0_var(--stuck-threshold)]\"\r\n      },\r\n      backdrop: {\r\n        true: \"backdrop-blur supports-[animation-timeline:scroll()]:[animation:stuck-backdrop_linear_both] supports-[animation-timeline:scroll()]:[animation-timeline:scroll(nearest_block)] supports-[animation-timeline:scroll()]:[animation-range:0_var(--stuck-threshold)]\"\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\nconst effectClasses = cn(\r\n  stickySurfaceVariants({\r\n    line: hasLine,\r\n    elevate: hasElevate,\r\n    backdrop: hasBackdrop\r\n  }),\r\n  className\r\n);\r\n\r\nconst styleVars = Object.entries(defaultVars)\r\n  ?.map(([k, v]) => `${k}:${v}`)\r\n  ?.join(\";\");\r\n---\r\n\r\n<Tag\r\n  class={effectClasses}\r\n  style={`${styleVars};${style}`}\r\n  data-sticky-surface\r\n  {...props}\r\n>\r\n  <slot />\r\n</Tag>\r\n\r\n<style>\r\n@supports (animation-timeline: scroll()) {\r\n  /* Line fade-in */\r\n  @keyframes show-line {\r\n    from { opacity: 0 }\r\n    to { opacity: 1 }\r\n  }\r\n  /* Shadow fade-in */\r\n  @keyframes stuck-shadow {\r\n    from { box-shadow: none }\r\n    to { box-shadow: var(--stuck-shadow) }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n{Astro.props.observeStuck && (\r\n  <script is:inline>\r\n    (() => {\r\n      const surfaces = document.querySelectorAll('[data-sticky-surface]');\r\n      surfaces.forEach(surface => {\r\n        // Insert a 1px sentinel right before the sticky element\r\n        const sentinel = document.createElement('div');\r\n        sentinel.style.cssText = 'position:relative;height:0;opacity:0;visibility:hidden;';\r\n        surface.parentNode?.insertBefore(sentinel, surface);\r\n    \r\n        const io = new IntersectionObserver(([e]) => {\r\n          surface.classList.toggle('is-stuck', !e.isIntersecting);\r\n        }, { threshold: [0, 1] });\r\n    \r\n        io.observe(sentinel);\r\n      });\r\n    })();\r\n  </script>\r\n)}",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}