{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "dialog",
  "type": "registry:ui",
  "dependencies": [],
  "files": [
    {
      "path": "ui/Dialog.astro",
      "content": "---\n/**\n * @component Dialog\n * @title Dialog\n * @description Accessible dialog/modal component using the native `<dialog>` element, with open/close logic.\n *\n * @prop {boolean} [open] - Whether the dialog is open (controlled).\n * @prop {function} [onOpenChange] - Callback when open state changes.\n * @prop {string} [class] - Additional classes for the dialog element.\n * @prop {string} [backdropClass] - Additional classes for the backdrop.\n * @prop {string} [containerClass] - Additional classes for the dialog container.\n * @prop {boolean} [closeOnBackdrop=true] - Whether clicking the backdrop closes the dialog.\n *\n * @example\n *\n * <Button onclick=\"myDialog.open()\">Manage Cookies</Button>\n * <Dialog id=\"myDialog\" class=\"backdrop-blur-md\">\n *   <Fragment slot=\"title\">Manage Cookies</Fragment>\n *   <Fragment slot=\"description\">Using websites and apps involves storing and retrieving information from your device, including cookies and other identifiers, which can be shared with third parties, for various activities. We provide a simple tool below allowing you to tailor your choices as you deem fit. You can change your consent at any time. Learn more.</Fragment>\n *   <Fragment slot=\"content\">\n *     <div class=\"mt-5\">\n *       <div class=\"flex items-center gap-3\">\n *         <Checkbox id=\"cookies-necessary\" name=\"cookies-necessary\" disabled checked />\n *         <Label for=\"cookies-necessary\">Strictly Necessary Cookies (always active)</Label>\n *       </div>\n *       <p class=\"text-sm text-muted-foreground ml-8 mt-1\">These cookies are essential for the site to function and cannot be toggled off. They assist with security, user authentication, customer support, etc.</p>\n *     </div>\n *     <div class=\"mt-5\">\n *       <div class=\"flex items-center gap-3\">\n *         <Checkbox id=\"cookies-analytics\" name=\"cookies-analytics\" />\n *         <Label for=\"cookies-analytics\">Analytics Cookies</Label>\n *       </div>\n *       <p class=\"text-sm text-muted-foreground ml-8 mt-1\">These cookies help us understand how visitors interact with our site. They allow us to measure traffic and improve site performance.</p>\n *     </div>\n *     <div class=\"mt-5\">\n *       <div class=\"flex items-center gap-3\">\n *         <Checkbox id=\"cookies-marketing-performance\" name=\"cookies-marketing-performance\" />\n *         <Label for=\"cookies-marketing-performance\">Marketing Performance Cookies</Label>\n *       </div>\n *       <p class=\"text-sm text-muted-foreground ml-8 mt-1\">These cookies help us measure the effectiveness of our marketing campaigns.</p>\n *     </div>\n *   </Fragment>\n *   <Fragment slot=\"footer\">\n *     <Button variant=\"outline\" data-dialog-close class=\"mt-4\">Close</Button>\n *     <Button data-dialog-close class=\"mt-4\">Save changes</Button>\n *   </Fragment>\n * </Dialog>\n */\n\nimport { cn } from \"@/lib/utils\";\n\nconst {\n  open = false,\n  onOpenChange = null,\n  class: className = \"\",\n  backdropClass = \"\",\n  containerClass = \"\",\n  closeOnBackdrop = true,\n  id: providedId,\n  ...props\n} = Astro.props;\n\nconst id = providedId ?? `dialog-${Math.random().toString(36).slice(2, 10)}`;\n---\n\n<dialog\n  id={id}\n  class={cn(\n    \"group grid place-items-center opacity-0 open:opacity-100 visibility-hidden open:visibility-visible open:pointer-events-auto pointer-events-none transition-discrete max-w-screen max-h-screen bg-transparent transition-all duration-150 ease-in-out fixed z-50 left-0 top-0 w-full h-full\",\n    className,\n  )}\n  {...props}\n>\n  <div\n    class={[\n      \"relative z-10 bg-background rounded-xl shadow-lg p-6 max-w-lg w-full row-start-1 col-start-1\",\n      // motion\n      \"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95 transition-all duration-150 ease-in-out\",\n      \"group-open:opacity-100 group-open:translate-y-0 group-open:sm:scale-100\",\n      containerClass,\n    ].join(\" \")}\n    role=\"document\"\n  >\n    <Fragment>\n      {\n        Astro.slots.title && (\n          <div class=\"mb-4 font-medium text-xl\">\n            <slot name=\"title\" />\n          </div>\n        )\n      }\n      {\n        Astro.slots.description && (\n          <p class=\"text-sm text-muted-foreground\">\n            <slot name=\"description\" />\n          </p>\n        )\n      }\n      {\n        Astro.slots.content && (\n          <div class=\"mb-6\">\n            <slot name=\"content\" />\n          </div>\n        )\n      }\n      {\n        Astro.slots.footer && (\n          <div class=\"flex justify-end gap-2\">\n            <slot name=\"footer\" />\n          </div>\n        )\n      }\n    </Fragment>\n  </div>\n</dialog>\n<div\n  class={[\n    \"transition-discrete fixed inset-0 bg-black/50 opacity-0 duration-200 ease-in-out\",\n    \"group-data-[state=open]:opacity-100 group-data-[state=closed]:opacity-0\",\n    backdropClass,\n  ].join(\" \")}\n  tabIndex=\"-1\"\n>\n</div>\n\n<form\n  method=\"dialog\"\n  class=\"grid row-start-1 col-start-1 place-self-stretch -z-1 opacity-0\"\n>\n  <button data-dialog-close>Close</button>\n</form>\n\n<script type=\"module\" define:vars={{ id, open, closeOnBackdrop }}>\n  const dialog = /** @type {HTMLDialogElement|null} */ (\n    document.getElementById(id)\n  );\n  if (!dialog) {\n    console.warn(`[Dialog] Element with id \"${id}\" not found.`);\n  } else {\n    const openDialog = () => {\n      // Make it visible but keep in closed state for first paint\n      // dialog.classList.remove('hidden');\n      // dialog.classList.add('flex');\n      if (!dialog.open) dialog.showModal();\n    };\n\n    const animateClose = () => {\n      dialog.setAttribute(\"data-state\", \"closed\");\n      if (dialog.open) dialog.close();\n    };\n\n    // Backdrop click to close\n    if (closeOnBackdrop) {\n      const backdrop = dialog.querySelector(\"[data-dialog-backdrop]\");\n      if (backdrop) {\n        backdrop.addEventListener(\"click\", () => animateClose());\n      }\n    }\n\n    // [data-dialog-close] elements\n    dialog.querySelectorAll(\"[data-dialog-close]\").forEach((btn) => {\n      btn.addEventListener(\"click\", () => animateClose());\n    });\n\n    // Dispatch custom events and manage visibility\n    dialog.addEventListener(\"close\", () => {\n      // dialog.classList.add('hidden');\n      // dialog.classList.remove('flex');\n      dialog.dispatchEvent(new CustomEvent(\"dialog-close\", { bubbles: true }));\n    });\n    dialog.addEventListener(\"cancel\", (e) => {\n      // ESC key: prevent default to allow animated close\n      e.preventDefault();\n      dialog.dispatchEvent(new CustomEvent(\"dialog-cancel\", { bubbles: true }));\n      animateClose();\n    });\n\n    // Expose a global controller to match <Button onclick={myDialog.open()}>\n    // window[id].open() / close() / toggle() / isOpen()\n    const controller = {\n      open: () => openDialog(),\n      close: () => animateClose(),\n      toggle: () => (dialog.open ? animateClose() : openDialog()),\n      isOpen: () => dialog.open,\n      el: dialog,\n    };\n    try {\n      // Define as non-configurable to avoid accidental overwrites\n      Object.defineProperty(window, id, {\n        value: controller,\n        writable: false,\n        configurable: false,\n      });\n    } catch {\n      // Fallback assignment if property already exists\n      window[id] = controller;\n    }\n  }\n</script>\n",
      "type": "registry:ui"
    }
  ]
}