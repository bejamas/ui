---
import EditLink from "virtual:starlight/components/EditLink";
import LastUpdated from "virtual:starlight/components/LastUpdated";
import Pagination from "virtual:starlight/components/Pagination";
import config from "virtual:starlight/user-config";
---

<footer class="sl-flex footer-wide">
  <div class="meta"><EditLink /><LastUpdated /></div>
  <Pagination />
  <div class="fade"></div>
</footer>

{
  config.credits && (
    <div class="kudos sl-flex footer-wide">
      <p>
        Built at <a href="https://bejamas.com?utm_source=ui">Bejamas</a>. The
        source code is available on{" "}
        <a href="https://github.com/bejamas/ui">GitHub</a>.
      </p>
    </div>
  )
}

<style>
  @layer starlight.core {
    .footer-wide {
      width: calc(
        100% + calc(var(--sl-content-pad-x) * 2) + calc(var(--spacing) * 2)
      );
      margin-inline: calc(var(--spacing) * -1 - var(--sl-content-pad-x));
      padding-inline: calc(var(--sl-content-pad-x) + var(--spacing));
    }

    footer {
      flex-direction: column;
      gap: 1.5rem;
      position: sticky;
      bottom: 0;
      background: linear-gradient(to top, var(--background), transparent);
      padding-block: calc(var(--spacing) * 3);
      z-index: 10;
    }

    @media (min-width: 50rem) {
      footer {
        position: relative;
        background: transparent;
      }
      .meta {
        display: flex;
      }
      .kudos {
        margin-bottom: calc(var(--spacing) * -10);
      }
    }

    .meta {
      gap: 0.75rem 3rem;
      justify-content: space-between;
      flex-wrap: wrap;
      margin-top: 3rem;
      font-size: var(--sl-text-sm);
      color: var(--sl-color-gray-3);
      display: flex;
    }

    .meta:empty {
      display: none;
    }

    .meta > :global(p:only-child) {
      margin-inline-start: auto;
    }

    .kudos {
      align-items: center;
      gap: 0.5em;
      margin-block: 0;
      font-size: var(--sl-text-xs);
      color: var(--muted-foreground);
      justify-content: center;
      padding-top: calc(var(--spacing) * 12);
      padding-bottom: 0;
      background-color: var(--background);
      justify-content: center;
    }
    .kudos a {
      color: var(--muted-foreground);
      text-decoration: underline;
      text-underline-offset: 0.1875rem;
    }
    .kudos a:hover {
      color: var(--foreground);
    }

    @media (min-width: 50rem) {
      .kudos {
        background-color: transparent;
      }
    }

    .fade {
      --blur: 4px;
      --stop: 50%;
      --height: 72px;
      position: absolute;
      pointer-events: none;
      width: 100%;
      height: var(--height);
      user-select: none;
      -webkit-user-select: none;
      left: 0;
      -webkit-backdrop-filter: blur(var(--blur));
      backdrop-filter: blur(var(--blur));

      background: linear-gradient(to bottom, transparent, var(--background));
      mask-image: linear-gradient(
        to top,
        var(--background) var(--stop),
        transparent
      );
      bottom: 0;
    }

    @media (min-width: 50rem) {
      .fade {
        display: none;
      }
    }
  }

  @layer starlight.components {
    .kudos :global(svg) {
      color: var(--sl-color-orange);
    }
  }
</style>
