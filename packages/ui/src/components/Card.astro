---
/**
 * @component Card
 * @title Card
 * @description UI container for grouping content with header, footer, etc.
 * @status stable
 *
 * @example
 *
 * <Card class="w-full max-w-sm not-content" footerClass="flex-col gap-2">
 *   <Fragment slot="header">
 *     <h3 class="text-xl font-medium leading-none">Login to your account</h3>
 *     <p class="text-muted-foreground text-sm">Enter your email below to login to your account</p>
 *   </Fragment>
 *
 *   <Fragment slot="content">
 *     <form>
 *       <div class="flex flex-col gap-6">
 *         <div class="grid gap-2">
 *           <Label for="email">Email</Label>
 *           <Input type="email" placeholder="m@example.com" required />
 *         </div>
 *         <div class="grid gap-2">
 *           <Label for="password">Password</Label>
 *           <Input type="password" placeholder="Password" required />
 *           <div class="flex items-center">
 *             <a href="#" class="ml-auto text-sm underline-offset-4 hover:underline">Forgot your password?</a>
 *           </div>
 *         </div>
 *       </div>
 *     </form>
 *   </Fragment>
 *
 *   <Fragment slot="footer">
 *     <Button type="submit" class="w-full">Login</Button>
 *     <Button variant="outline" class="w-full">Login with Google</Button>
 *   </Fragment>
 * </Card>
 *
 * @usage
 *
 * Update the import path to match your project setup.
 *
 * ```astro
 * ---
 * import Card from '@/components/ui/Card.astro';
 * ---
 * ```
 *
 * ```astro
 * <Card>
 *   <Fragment slot="header">
 *     <h3 class="text-xl font-medium leading-none">Card Title</h3>
 *     <p class="text-muted-foreground text-sm">Card Description</p>
 *   </Fragment>
 *
 *   <Fragment slot="content">
 *     Card Content
 *   </Fragment>
 *
 *   <Fragment slot="footer">
 *     Card Footer
 *   </Fragment>
 * </Card>
 * ```

 * @examples
 *
 * ### With background image
 *
 * <Card class="relative aspect-[320/390] bg-gray-100 dark:bg-gray-800 w-full max-w-[320px]">
 *   <Fragment slot="media">
 *     <img
 *       alt="Happy pet"
 *       aria-hidden="true"
 *       class="pointer-events-none absolute inset-0 h-full w-full select-none object-cover"
 *       src="/demo/doggo.png"
 *     />
 *     <div
 *       aria-hidden="true"
 *       class="pointer-events-none absolute bottom-0 left-0 right-0 h-[64px]"
 *     >
 *       <div
 *         class="absolute inset-0 h-[200%] backdrop-blur-sm"
 *         style={{
 *           WebkitMaskImage: "linear-gradient(to top, black 80%, transparent)",
 *           maskImage: "linear-gradient(to top, black 80%, transparent)",
 *           maskRepeat: "no-repeat",
 *           maskSize: "100% 100%",
 *         }}
 *       />
 *     </div>
 *   </Fragment>
 * 
 *   <Fragment slot="header">
 *     <h3 class="text-xl font-medium leading-none">Jacky good boi</h3>
 *     <p class="text-sm text-muted-foreground">loves long walks</p>
 *   </Fragment>
 *
 *   <Fragment slot="footer">
 *     <p class="text-sm">3 years old</p>
 *     <Button variant="secondary">Adopt me</Button>
 *   </Fragment>
 * </Card>
 * 
 * ### Ghost variant
 *
 * <Card variant="ghost" class="max-w-[320px]">
 *   <Fragment slot="media">
 *     <img
 *       alt="Happy pet"
 *       aria-hidden="true"
 *       src="https://images.unsplash.com/photo-1759223293091-f4c757c79f6c?q=80&w=2340&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
 *     />
 *   </Fragment>
 *   <Fragment slot="header">
 *     <h3 class="text-xl font-medium leading-none">New breakthrough in AI</h3>
 *     <p class="text-sm text-muted-foreground"><span class="font-medium">Aug 10, 2025</span> Â· 10 min read</p>
 *   </Fragment>
 * </Card>
 *
 */

import { cva } from "class-variance-authority";
import { cn } from "../lib/utils";
const { variant = "default", class: className = "" } = Astro.props;

const cardVariants = cva(
  "text-card-foreground overflow-clip relative flex flex-col",
  {
    variants: {
      variant: {
        default: "bg-card border p-5 border-border shadow-sm rounded-xl",
        ghost: "[&_img]:rounded-xl",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

const mediaVariants = cva("z-0", {
  variants: {
    variant: {
      default: "",
      ghost: "mb-5",
    },
  },
});

const headerVariants = cva(
  "@container/card-header relative z-1 text-pretty grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",
  {
    variants: {
      variant: {
        // default: "px-4",
      },
    },
  },
);
---

<!-- Card container -->
<div class={cn(cardVariants({ variant, className }))}>
  {
    Astro.slots.media && (
      <div
        class={cn(
          mediaVariants({ variant, className: Astro.props.mediaClass }),
        )}
        slot="media"
      >
        <slot name="media" />
      </div>
    )
  }
  {
    Astro.slots.header && (
      <div
        class={cn(
          headerVariants({ variant, className: Astro.props.headerClass }),
        )}
        slot="header"
      >
        <slot name="header" />
      </div>
    )
  }
  {
    Astro.slots.content && (
      <div
        class={cn([
          {
            "py-5": variant === "default",
          },
          Astro.props.contentClass,
        ])}
        slot="content"
      >
        <slot name="content" />
      </div>
    )
  }
  {
    Astro.slots.footer && (
      <div
        class:list={[
          "flex items-center relative z-1 [.border-t]:pt-6 justify-between gap-2 mt-auto",
          Astro.props.footerClass,
        ]}
        slot="footer"
      >
        <slot name="footer" />
      </div>
    )
  }
</div>
