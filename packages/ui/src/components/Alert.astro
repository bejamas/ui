---
/**
 * @component Alert
 * @title Alert
 * @description Displays a alert or a component that looks like a alert.
 * @status stable
 * @since 0.1.0
 *
 * @example
 *
 * <div class="grid w-full max-w-xl items-start gap-4">
 *   <Alert>
 *     <Fragment slot="icon">
 *       <AlertCircleIcon className="size-3" />
 *     </Fragment>
 *     <Fragment slot="title">
 *       Success! Your changes have been saved
 *     </Fragment>
 *     <Fragment slot="description">
 *       This is an alert with icon, title and description.
 *     </Fragment>
 *   </Alert>
 *   <Alert>
 *     <Fragment slot="title">This Alert has a title and an icon. No description.</Fragment>
 *   </Alert>
 *   <Alert variant="destructive">
 *     <Fragment slot="title">Unable to process your payment.</Fragment>
 *     <Fragment slot="description">
 *       <p>Please verify your billing information and try again.</p>
 *       <ul class="list-inside list-disc text-sm">
 *         <li>Check your card details</li>
 *         <li>Ensure sufficient funds</li>
 *         <li>Verify billing address</li>
 *       </ul>
 *     </Fragment>
 *   </Alert>
 * </div>
 *
 */
import { cn } from "@bejamas/ui/lib/utils";
const { variant = "default", class: className = "" } = Astro.props;

const baseClass =
  "relative w-full rounded-xl border border-border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current";
const variantClass =
  variant === "destructive"
    ? "text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"
    : "bg-card text-card-foreground";
---

<!--
  Alert component container.
  Applies variant-based styling and supports slots for title, description, and additional content.
-->
<div
  data-slot="alert"
  role="alert"
  class={cn(baseClass, variantClass, className)}
>
  <!-- Slot for alert icon -->
  <slot name="icon" />
  <!-- Slot for alert title -->
  {
    Astro.slots.title && (
      <div
        data-slot="alert-title"
        class={cn(
          "col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",
        )}
      >
        <slot name="title" />
      </div>
    )
  }
  <!-- Slot for alert description -->
  {
    Astro.slots.description && (
      <div
        data-slot="alert-description"
        class={cn(
          "text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",
        )}
      >
        <slot name="description" />
      </div>
    )
  }
  <!-- Default slot for additional content (e.g., icon, actions) -->
  <slot />
</div>
