---
import type { HTMLAttributes } from "astro/types";
import { cn } from "@bejamas/ui/lib/utils";
import CheckIcon from "@lucide/astro/icons/check";

type Props = {
  value: string;
  label?: string;
  disabled?: boolean;
  class?: string;
} & HTMLAttributes<"div">;

const {
  value,
  label,
  disabled = false,
  class: className = "",
  ...rest
} = Astro.props as Props;
---

<div
  {...rest}
  data-slot="combobox-item"
  data-value={value}
  data-label={label}
  data-disabled={disabled ? "" : undefined}
  class={cn(
    "group/item relative flex w-full cursor-default select-none items-center gap-1.5 rounded-md py-1.5 pr-8 pl-2 text-sm outline-hidden",
    "data-[highlighted]:bg-accent",
    "data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
    "not-data-[variant=destructive]:data-highlighted:**:text-accent-foreground",
    "[&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0",
    className,
  )}
>
  <span
    class="pointer-events-none absolute right-2 flex size-4 items-center justify-center"
  >
    <span
      data-slot="combobox-item-indicator"
      class="hidden group-data-[selected]/item:inline-flex"
    >
      <CheckIcon class="size-4" />
    </span>
  </span>
  <span data-slot="combobox-item-text"><slot /></span>
</div>
