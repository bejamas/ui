---
import type { HTMLAttributes } from "astro/types";
import { cn } from "@bejamas/ui/lib/utils";

type Props = {
  class?: string;
} & HTMLAttributes<"div">;

const { class: className = "", ...rest } = Astro.props as Props;
---

<!-- Outer: visibility + state hooks (positioning handled by @data-slot/combobox) -->
<div
  {...rest}
  data-slot="combobox-content"
  hidden
  class={cn(
    "group/combobox-content",
    "z-50",
    "hidden data-[state=open]:block [transition:display_150ms_allow-discrete] starting:data-[state=closed]:block",
    className,
  )}
>
  <!-- Inner: visual styling + animations -->
  <div
    class={cn(
      "bg-popover text-popover-foreground min-w-[var(--combobox-input-width,8rem)] overflow-hidden rounded-lg shadow-md ring-1 ring-foreground/10",
      "group-data-[state=open]/combobox-content:animate-in group-data-[state=closed]/combobox-content:animate-out",
      "group-data-[state=closed]/combobox-content:fade-out-0 group-data-[state=open]/combobox-content:fade-in-0",
      "group-data-[state=closed]/combobox-content:zoom-out-95 group-data-[state=open]/combobox-content:zoom-in-95",
      "group-data-[side=bottom]/combobox-content:slide-in-from-top-2 group-data-[side=top]/combobox-content:slide-in-from-bottom-2",
      "*:data-[slot=input-group]:m-1 *:data-[slot=input-group]:mb-0 *:data-[slot=input-group]:h-8 *:data-[slot=input-group]:shadow-none",
      "[--tw-animation-fill-mode:both]",
    )}
  >
    <slot />
  </div>
</div>
