---
/**
 * @component Avatar
 * @description A circular avatar component for displaying user images or initials, inspired by shadcn/ui.
 * 
 * @prop {string} [src] - The image source URL.
 * @prop {string} [alt] - The alt text for the image.
 * @prop {string} [fallback] - The fallback text or initials to display if the image fails to load.
 * @prop {string} [class] - Additional classes for the avatar container.
 * @prop {string} [imageClass] - Additional classes for the image element.
 * @prop {string} [fallbackClass] - Additional classes for the fallback element.
 * 
 * @example
 * <div class="flex flex-row flex-wrap items-center gap-12">
 *   <Avatar>
 *     <img slot="avatar-image" src="https://github.com/bejamas.png" alt="@bejamas" />
 *     <span slot="fallback">BJ</span>
 *   </Avatar>
 *   <Avatar class="rounded-lg">
 *     <img slot="avatar-image" src="https://github.com/thomkrupa.png" alt="@thomkrupa" />
 *     <span slot="fallback">ER</span>
 *   </Avatar>
 *   <div class="*:data-[slot=avatar]:ring-background flex -space-x-2 *:data-[slot=avatar]:ring-2 *:data-[slot=avatar]:grayscale">
 *     <Avatar>
 *       <img slot="avatar-image" src="https://github.com/withastro.png" alt="@withastro" />
 *       <span slot="fallback">AW</span>
 *     </Avatar>
 *     <Avatar>
 *       <img slot="avatar-image" src="https://github.com/shadcn.png" alt="@shadcn" />
 *       <span slot="fallback">SH</span>
 *     </Avatar>
 *     <Avatar>
 *       <img slot="avatar-image" src="https://github.com/fredkschott.png" alt="@fredkschott" />
 *       <span slot="fallback">ER</span>
 *     </Avatar>
 *   </div>
 * </div>
 */
const {
  src = "",
  alt = "",
  fallback = "",
  class: className = "",
  imageClass = "",
  fallbackClass = "",
  ...props
} = Astro.props;
const hasAvatarImageSlot = Astro.slots.has("avatar-image");
---

<div
  data-slot="avatar"
  class={["relative flex size-8 shrink-0 overflow-hidden rounded-full", className].join(" ")}
  {...props}
>
  {hasAvatarImageSlot ? (
    <slot name="avatar-image" />
  ) : src ? (
    <img
      src={src}
      alt={alt}
      class={["aspect-square size-full object-cover", imageClass].join(" ")}
      loading="lazy"
    />
  ) : (
    <span
      class={["bg-muted flex size-full items-center justify-center rounded-full text-muted-foreground font-medium uppercase select-none", fallbackClass].join(" ")}
    >
      <slot name="fallback">{fallback}</slot>
    </span>
  )}
</div>
