---
import type { HTMLAttributes } from "astro/types";
import { cn } from "@repo/ui/lib/utils";
import ChevronDownIcon from "@lucide/astro/icons/chevron-down";

type Props = {
  class?: string;
  size?: "sm" | "default" | "lg";
} & HTMLAttributes<"button">;

const {
  class: className = "",
  size = "default",
  ...rest
} = Astro.props as Props;
---

<button
  {...rest}
  type="button"
  data-slot="select-trigger"
  data-size={size}
  class={cn(
    "border-input data-[placeholder]:text-muted-foreground dark:bg-input/30 dark:hover:bg-input/50",
    "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
    "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive aria-invalid:ring-[3px]",
    "flex w-full items-center justify-between gap-1.5 rounded-lg border bg-transparent px-3 py-2 text-sm shadow-xs",
    "whitespace-nowrap outline-none select-none transition-colors",
    "disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",
    "data-[size=sm]:h-8 data-[size=default]:h-9 data-[size=lg]:h-10",
    "*:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-1.5",
    "[&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0",
    className,
  )}
>
  <slot />
  <ChevronDownIcon class="size-4 text-muted-foreground" data-slot="select-icon" />
</button>
